<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <style type="text/css">
        button,
        div,
        form,
        input {
          margin: 10px;
        }
      </style>
</head>

<body>
        <div class = "conatiner"> 
            <h1> Welcome to the Gif Search</h1>
        </div>

        <div id = "button-display" ></div>
        <!-- <div id = "images"> -->

            <!-- </div> -->
        <form id="gif-form">
                <label for="gif-input">Search for a gif</label>
                <input type="text" id="gif-input"><br>

                <input id="add-gif" type="submit" value="Gif Search">
            </form>

        <div id = "images"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">



var tag = [
    "monkey",
    "dolphin", 
    "cow", 
    "pig", 
    "cat"
];


function renderButtons () {

for(var i = 0; i < tag.length; i++){

   var gifButton = $("<button>");
//    gifButton.addClass("button")
   gifButton.attr("data-name", tag[i]);
   gifButton.addClass("button");
   gifButton.text(tag[i]);

   $("#button-display").append(gifButton);

}
}

    $("#add-gif").on("click", function(event) {

        event.preventDefault();

        $("#button-display").empty();

        var searchTag = $("#gif-input").val().trim();

        tag.push(searchTag);

        renderButtons();
    });
    

renderButtons();


$(document.body).on("click",".button", function() {
var search = $(this).attr("data-name");
var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + search + "&api_key=WSu7YdGhxEmY7RFL1E6gjcfEVmatOfgF&limit=10";

// Perfoming an AJAX GET request to our queryURL
$.ajax({
  url: queryURL,
  method: "GET"
})

  .then(function(response) {
      console.log(queryURL);
      console.log(response);

var results = response.data;

console.log(results);

  for (var j = 0; j < results.length; j++) {

    var gifDiv = $("<div>");
    
    var title = $("<p>").html("title: " + results[j].title);
    var rating = $("<p>").html("rating: " + results[j].rating);
    
    var gifImage = $("<img>");
    gifImage.attr("src", results[j].images.fixed_height.url);
    gifImage.attr("data-animate", results[j].images.fixed_height.url);
    gifImage.attr("data-still", results[j].images.fixed_height_still.url)
    gifImage.attr("data-state", "still")
    gifImage.addClass("gif")
    gifDiv.append(title);
    gifDiv.append(rating);
    gifDiv.append(gifImage);

    $("#images").prepend(gifDiv);

  }
  $(document.body).on("click",".gif", function() {

    var state = $(this).attr("data-state");

    if (state === "still") {
        $(this).attr("src", $(this).attr("data-animate"));
        $(this).attr("data-state", "animate");
      } else {
        $(this).attr("src", $(this).attr("data-still"));
        $(this).attr("data-state", "still");
      }
    });
    // for (j = 0; j < results.length; j++) {
    //     if (state === "animate") {

    //     }





  // console.log(results);
 });
});
</script>
</body>
</html>